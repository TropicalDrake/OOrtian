<!DOCTYPE html>
<html>

<head>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/w3.css">

</head>


<body class="w3-container">

<div id="naglowek" class="w3-container w3-text-white w3-center" style="background-color:#2c2e3b;">
<h6>OOrtian</h6>
</div>

<input class="w3-input" type="text" id="textinput" placeholder="Text input" />

<ul class="w3-navbar w3-center" style="background-color:#2c2e3b;">
  <li style="width:20%" class="w3-hide-small">&nbsp;</li>
  <li style="width:20%" class="w3-pink"><a href="javascript:generuj()">Generate</a></li>
  <li style="width:20%" class="w3-pink"><a href="javascript:usun()">Clear</a></li>
  <li style="width:20%" class="w3-pink"><a href="javascript:opcje()">Options</a></li>
  <li style="width:20%" class="w3-hide-small">&nbsp;</li>
</ul>

<div class="w3-navbar w3-center" id="options" style="display:none; background-color:#353747;">

<input type="number" id="przerwyinput" placeholder="Spaces" value='5'/>
<input type="color" id="colorinput" onChange="kolor()"/>

</div>

<div class="w3-center w3-padding" style="margin-top:0px; height:57px;">
<canvas id="myCanvas" width="41" height="41">
</canvas>
</div>
<div class="w3-small w3-card-12 w3-text-white w3-leftbar w3-border-pink" style="background-color:#2c2e3b; padding-left:10px;">
If the text is not complete, click generate again
<br>
Use <a class="w3-text-pink"><</a> for start and <a class="w3-text-pink">></a> for end, rightclick and save as to download
</div>

<script>
function opcje(){

var opcje = document.getElementById('options');

if(opcje.style.display=='none'){

opcje.style.display='block';

}else
opcje.style.display='none';

}
function generuj() {

	var przerwyinput = document.getElementById("przerwyinput").value;
	var przerwy = parseInt(przerwyinput);
	
    var t = document.getElementById("textinput");
	var tresc = t.value;
	var dlugosc = tresc.length;
	var c = document.getElementById("myCanvas");
	
	var dlc = ((dlugosc*41)+(przerwy*(dlugosc-1)));
	
	c.width = dlc;
	c.height = 41;
	
	var ox = 0;
	
	for(var lsd = 0; lsd < dlugosc; lsd++)
	{
	var znak = tresc.charAt(lsd);
	
	if(znak == "?"){
	znak = "qu";
	}
	if(znak == " "){
	znak = "pu";
	}
	if(znak == "<"){
	znak = "start";
	}
	if(znak == ">"){
	znak = "end";
	}
	
	var ctx = c.getContext("2d");
    var img = new Image();
	znak = znak.toLowerCase();
	img.src = "img/"+znak+".png";
	ctx.drawImage(img,ox,0);
	
	ox += 41;
	ox += przerwy;
}
}
function usun(){
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
	ctx.clearRect(0,0,c.width,c.height);
}
function kolor(){


var k = document.getElementById("colorinput").value;
var ko = k.slice(1,20);
var kolor = "0x"+ko;

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");

var imageData = ctx.getImageData(0, 0, c.width, c.height);
var pixelArray = imageData.data;
var length = pixelArray.length / 4; // 4 components - red, green, blue and alpha

var er = kolor >> 16;
var gje = kolor >> 8 & 0xFF;
var be = kolor & 0xFF;

c.crossOrigin = "Anonymous";

for (var i = 0; i < length; i++) {
    var index = 4 * i;

    var r = pixelArray[index];
    var g = pixelArray[++index];
    var b = pixelArray[++index];
    var a = pixelArray[++index];


    pixelArray[--index] = be; //b
    pixelArray[--index] = gje; //g
	pixelArray[--index] = er; //r
}
ctx.putImageData(imageData,0,0);
}
function CanvasSaver(url) {
     
    this.url = url;
     
    this.savePNG = function(cnvs, fname) {
        if(!cnvs || !url) return;
        fname = fname || 'picture';
         
        var data = cnvs.toDataURL("image/png");
        data = data.substr(data.indexOf(',') + 1).toString();
         
        var dataInput = document.createElement("input") ;
        dataInput.setAttribute("name", 'imgdata') ;
        dataInput.setAttribute("value", data);
        dataInput.setAttribute("type", "hidden");
         
        var nameInput = document.createElement("input") ;
        nameInput.setAttribute("name", 'name') ;
        nameInput.setAttribute("value", fname + '.png');
         
        var myForm = document.createElement("form");
        myForm.method = 'post';
        myForm.action = url;
        myForm.appendChild(dataInput);
        myForm.appendChild(nameInput);
         
        document.body.appendChild(myForm) ;
        myForm.submit() ;
        document.body.removeChild(myForm) ;
    };
     
    this.generateButton = function (label, cnvs, fname) {
        var btn = document.createElement('button'), scope = this;
        btn.innerHTML = label;
        btn.style['class'] = 'canvassaver';
        btn.addEventListener('click', function(){scope.savePNG(cnvs, fname);}, false);
         
        document.body.appendChild(btn);
         
        return btn;
    };
}

</script>


</body>



</html>